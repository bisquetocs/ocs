{% extends "franchise/home.html" %}

{% block extras %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">Mis proveedores</h1>
</div>

<div class="container">
  <div class='container'>
    <div class='row'>

      {% if empty_list == 1 %}
      <div class="shadow-lg p-3 mb-5 bg-white rounded">
        <p>
          Aún no te has relacionado con proveedores.
        </p>
        <p>
          Da click <a href="/franchise/my_providers/link/">aquí</a>
          para enlazarte con tus proveedores registrados
        </p>
      </div>
      {% endif %}
    </div>

      {% if empty_list == 0 %}
      <div class="col">
        <a class="btn btn-primary" href="/franchise/my_providers/link/">
          Enlazarme con un proveedor
        </a>
      </div>
<br>
      <table  class="table table-striped table-bordered" id="my_providers">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Domicilio</th>
            <th>Responsable</th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          {% for provider in relation_list %}
          <tr>
            <td>{{ provider.id_provider.nombre }}</td>
            <td>{{ provider.id_provider.domicilio }}</td>
            <td>{{ provider.id_provider.id_usuario.first_name }} {{provider.id_provider.id_usuario.last_name}}</td>
            <td>
              <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delete_modal_{{  provider.id_provider.id }}">
                Borrar
              </button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>


      <!-- Modals -->
      {% for provider in relation_list %}
      <div class="modal fade" id="delete_modal_{{ provider.id_provider.id }}" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Borrar enlace</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>
                ¿Estás seguro de que quieres <b>borrar</b> a <b>{{ provider.id_provider.nombre }}</b> de tu lista de proveedores?
              </p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
              <button type="button" class="btn btn-danger">Borrar</button>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}

      {% endif %}

  </div>

</div>


<script>
$(document).ready( function () {
    $('#my_providers').DataTable({
      "language": {
            "lengthMenu": "Mostrar _MENU_ elementos por página",
            "zeroRecords": "No se encontraron resultados",
            "info": "Página _PAGE_ de _PAGES_",
            "infoEmpty": "No hay registros disponibles",
            "infoFiltered": "(filtered from _MAX_ total records)",
            "search":         "Buscar:",
            "paginate": {
                "first":      "Primero",
                "last":       "Último",
                "next":       "Siguiente",
                "previous":   "Anterior"
            },
        }
    });

});

</script>

{% endblock extras %}
